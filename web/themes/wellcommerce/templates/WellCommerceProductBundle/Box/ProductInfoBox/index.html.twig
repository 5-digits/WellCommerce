{% trans_default_domain "wellcommerce" %}

<div class="product-details">
    <div class="row">
        <div class="col-md-9 col-xs-12">
	        <div class="col-sm-5 col-xs-12 text-center">
		            {% set productPhotos = product.getProductPhotos() %}

					{% for photo in product.productPhotos if photo.mainPhoto == 1 %}
	                <a href="#" class="mainphoto"><img src="{{ image(photo.photo.path, 'large') }}" /></a>
					{% endfor %}

		            <div class="thumbnails">
		                {% for photo in product.productPhotos if photo.mainPhoto == 0 %}
		                    <a href="#"><img src="{{ image(photo.photo.path, 'large') }}" /></a>
		                {% endfor %}
		            </div>
	        </div>
	        <div class="col-sm-7 col-xs-12">
	            <div class="description">
	                <div class="controls clearfix">
	                    <a href="#" class="pull-left coming-soon">Previous product</a>
	                    <a href="#" class="pull-right coming-soon">Next product</a>
	                </div>

	                <h1>{{ product.translate().name }}</h1>

	                <div class="reviews">
	                    <div class="stars rat rat3">
	                        <img src="{{ asset('themes/wellcommerce/assets/img/star-on.png') }}" />
	                        <img src="{{ asset('themes/wellcommerce/assets/img/star-on.png') }}" />
	                        <img src="{{ asset('themes/wellcommerce/assets/img/star-on.png') }}" />
	                        <img src="{{ asset('themes/wellcommerce/assets/img/star-on.png') }}" />
	                        <img src="{{ asset('themes/wellcommerce/assets/img/star-on.png') }}" />
	                    </div>

	                    <span>4.3 / see 12 reviews</span>
	                </div>

	                <p>{{ product.translate().shortDescription|striptags }}</p>

	                <div class="row">
	                    <div class="col-sm-6 col-xs-6">
	                        <div class="delivery-info">
	                            <h5>{% trans %}product.label.shipping_cost{% endtrans %}</h5>
	                            {% for shipping in shippingCosts %}
	                            <span>{{ shipping.shippingMethod.translate().name }} {{ format_price(shipping.cost.grossAmount, shipping.cost.currency) }}</span>
	                            {% endfor %}
	                        </div>
	                    </div>
	                    <div class="col-md-4 col-sm-5 col-xs-6 col-lg-offset-2 col-md-offset-2 col-sm-offset-1">
	                        <div class="producer">
	                            <h5>Producer</h5>

	                            <a href="{{ path('dynamic_' ~ product.getProducer().translate.getRoute().getId()) }}"><img src="{{ asset('themes/wellcommerce/assets/prod/producer.png') }}" /></a>
	                        </div>
	                    </div>
	                </div>
	            </div>
	        </div>
        </div>
        <div class="col-md-3 col-xs-12">
            <div class="add-to-cart">
                {% if product.sellPrice.isDiscountValid() %}
                    <span class="price promo">
                        <small id="price">{{ format_price(product.sellPrice.grossAmount, product.sellPrice.currency) }}</small>
                        <span>{{ format_price(product.sellPrice.discountedGrossAmount, product.sellPrice.currency) }}</span>
                    </span>
                    <div class="labels">
                        <span class="label label-promotion">Promotion</span>
                    </div>
                {% else %}
                    <span class="price" id="price">
                        {{ format_price(product.sellPrice.grossAmount, product.sellPrice.currency) }}
                    </span>
                {% endif %}

                <div class="available text-center">
                    {% trans %}product.label.availability{% endtrans %}: <span class="grn">{{ product.availability.translate().name }}</span><br />
                    {% if shippingCosts.count > 0 %}
                        {% trans %}product.label.shipping_cost{% endtrans %}: {{ format_price(shippingCosts.first.cost.grossAmount, shippingCosts.first.cost.currency) }}
                    {% endif %}
                </div>
                {% include 'WellCommerceProductBundle:Front/Common:add_cart_form.html.twig' %}
            </div>

            <div class="additional text-center">
                {% if app.user and is_granted('ROLE_CLIENT') %}
                <a href="{{ path('front.client_wishlist.add', {"id": product.id}) }}">Add to wishlist</a><br />
                {% endif %}
                <a href="#" class="coming-soon">Add to compare</a>
            </div>
        </div>
    </div>
</div>

<div class="product-description">
    <div class="row">
        <div class="col-md-9 col-xs-12">
            <div class="description-block">
                <h2>Description</h2>
                <p>{{ product.translate().description }}</p>
            </div>

            <div class="description-block">
                <h2>Opinions</h2>

                <div class="alert alert-success">
                    <button class="btn btn-success btn-lg pull-right coming-soon">Add opinion</button>
                    <strong>Help others decide - add rating and review</strong><br />
                    Your rating will help others decide to choose the right product
                </div>
            </div>
        </div>
        <div class="col-md-3 hidden-sm hidden-xs">
            {% include 'WellCommerceCmsBundle:Front/Common:sidebar_contact.html.twig' %}
        </div>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function(){
        $('.product-details .add-to-cart').GProductAddCartForm({
            sAddProductRoute: 'front.cart.add',
            oProduct: $('#product', $(this)),
            oQuantity: $('#quantity', $(this)),
            oAttribute: $('#attribute', $(this)),
            oPrice: $('#price', $(this)),
            oBasketModal: $('#basket-modal'),
            oCartPreview: $('#topCart'),
            sAttributesSelectClass: '.attribute',
            aoAttributes: {{ attributes|raw }}
        });
    });
</script>
