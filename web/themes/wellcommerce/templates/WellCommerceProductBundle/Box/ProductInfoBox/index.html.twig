{% trans_default_domain "wellcommerce" %}
{% set productPhotos = product.getProductPhotos() %}
{% set translations = product.translate() %}
{% set sellPrice = product.getSellPrice() %}

<div class="product-details">
    <div class="row">
        <div class="col-lg-4 text-center">
            {% set productPhotos = product.getProductPhotos() %}

            {% for photo in productPhotos if photo.mainPhoto == 1 %}
                <a href="#" class="mainphoto"><img src="{{ image(photo.photo.path, 'large') }}" /></a>
            {% endfor %}

            <div class="thumbnails">
                {% for photo in productPhotos if photo.mainPhoto == 0 %}
                    <a href="#"><img src="{{ image(photo.photo.path, 'large') }}" /></a>
                {% endfor %}
            </div>
        </div>
        <div class="col-lg-5">
            <div class="description">
                <div class="controls clearfix">
                    <a href="#" class="pull-left coming-soon">Previous product</a>
                    <a href="#" class="pull-right coming-soon">Next product</a>
                </div>

                <h1>{{ translations.name }}</h1>

                <div class="reviews">
                    <div class="stars rat rat3">
                        <img src="{{ asset('themes/wellcommerce/assets/img/star-on.png') }}" />
                        <img src="{{ asset('themes/wellcommerce/assets/img/star-on.png') }}" />
                        <img src="{{ asset('themes/wellcommerce/assets/img/star-on.png') }}" />
                        <img src="{{ asset('themes/wellcommerce/assets/img/star-on.png') }}" />
                        <img src="{{ asset('themes/wellcommerce/assets/img/star-on.png') }}" />
                    </div>

                    <span>4.3 / see 12 reviews</span>
                </div>

                <p>{{ translations.shortDescription|striptags }}</p>

                <div class="row">
                    <div class="col-lg-6">
                        <div class="delivery-info">
                            <h5>{% trans %}product.label.availability{% endtrans %}</h5>
                            <span>{{ product.availability.translate().name }}</span>
                            <h5>{% trans %}product.label.shipping_cost{% endtrans %}</h5>
                            {% for shippingCost in shippingCosts %}
                            <span>{{ shippingCost.shippingMethod.translate().name }} {{ format_price(shippingCost.cost.grossAmount, shippingCost.cost.currency) }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col-lg-4 col-lg-offset-2">
                        <div class="producer">
                            <h5>Producer</h5>

                            <a href="{{ path('dynamic_' ~ product.getProducer().translate.getRoute().getId()) }}"><img src="{{ asset('themes/wellcommerce/assets/prod/producer.png') }}" /></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="add-to-cart">
                <span class="price" id="price">
                    {{ format_price(sellPrice.grossAmount, sellPrice.currency) }}
                </span>

                <div class="labels">
                    <span class="label label-promotion">Promotion</span>
                </div>

                <div class="available text-center">
                    Product is <span class="grn">available</span><br />
                    Shipping from: $25.00
                </div>

                <form class="form-horizontal">
                    <input type="hidden" id="product" value="{{ product.id }}"/>
                    <input type="hidden" id="attribute" value="0"/>
                    {% for group in attributeGroups %}
                    <div class="form-group">
                        <label for="size" class="col-lg-5 control-label">{{ group.name }}</label>
                        <div class="col-lg-7">
                            <select class="form-control attribute">
                                {% for valueId, valueName in group.values %}
                                    <option value="{{ valueId }}">{{ valueName }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    {% endfor %}
                    <div class="form-group">
                        <label for="quantity" class="col-lg-5 control-label">Quantity</label>
                        <div class="col-lg-7">
                            <input type="text" id="quantity" class="form-control" value="1" />
                        </div>
                    </div>
                    <button class="btn btn-primary btn-block text-left" id="add-cart">{% trans %}cart.button.add{% endtrans %}<img src="{{ asset('themes/wellcommerce/assets/img/add-to-cart.png') }}" class="pull-right" /></button>
                </form>
            </div>

            <div class="additional text-center">
                <a href="#" class="coming-soon">Add to clipboard</a><br />
                <a href="#" class="coming-soon">Add to compare</a>
            </div>
        </div>
    </div>
</div>

<div class="product-description">
    <div class="row">
        <div class="col-lg-9">
            <div class="description-block">
                <h2>Description</h2>
                <p>{{ translations.description }}</p>
            </div>

            <div class="description-block">
                <h2>Opinions</h2>

                <div class="alert alert-success">
                    <button class="btn btn-success btn-lg pull-right coming-soon">Add opinion</button>
                    <strong>Help others decide - add rating and review</strong><br />
                    Your rating will help others decide to choose the right product
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            {% include 'WellCommerceCmsBundle:Front/Common:sidebar_contact.html.twig' %}
        </div>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function(){
        $('.product-details .add-to-cart').GProductAddCartForm({
            sAddProductRoute: 'front.cart.add',
            oProduct: $('#product', $(this)),
            oQuantity: $('#quantity', $(this)),
            oAttribute: $('#attribute', $(this)),
            oPrice: $('#price', $(this)),
            oBasketModal: $('#basket-modal'),
            oCartPreview: $('#topCart'),
            sAttributesSelectClass: '.attribute',
            aoAttributes: {{ attributes|raw }}
        });
    });
</script>
