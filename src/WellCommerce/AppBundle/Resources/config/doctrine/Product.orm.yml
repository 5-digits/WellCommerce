WellCommerce\AppBundle\Entity\Product:
    type: entity
    table: product
    repositoryClass: WellCommerce\AppBundle\Repository\ProductRepository
    id:
        id:
            type: integer
            generator:
                strategy: AUTO
    embedded:
        buyPrice:
            class: WellCommerce\AppBundle\Entity\Price
            columnPrefix: buy_price_
        sellPrice:
            class: WellCommerce\AppBundle\Entity\DiscountablePrice
            columnPrefix: sell_price_
        dimension:
            class: WellCommerce\AppBundle\Entity\Dimension
            columnPrefix: dimension_
    fields:
        sku:
            type: string
            length: 64
            nullable: false
        stock:
            type: integer
            nullable: false
            options:
                default: 0
        trackStock:
            type: boolean
            nullable: false
            column: track_stock
        weight:
            type: decimal
            scale: 4
            nullable: false
            precision: 15
        packageSize:
            type: decimal
            scale: 4
            nullable: false
            precision: 15
            column: package_size
        enabled:
            type: boolean
            nullable: false
        hierarchy:
            type: integer
            nullable: true
            options:
                default: 0
    manyToOne:
        producer:
            targetEntity: WellCommerce\AppBundle\Entity\Producer
            fetch: LAZY
            inversedBy: products
            joinColumns:
                producer_id:
                    referencedColumnName: id
                    onDelete: 'SET NULL'
        unit:
            targetEntity: WellCommerce\AppBundle\Entity\Unit
            fetch: LAZY
            joinColumns:
                unit_id:
                    referencedColumnName: id
                    onDelete: 'SET NULL'
        availability:
            targetEntity: WellCommerce\AppBundle\Entity\Availability
            fetch: LAZY
            joinColumns:
                availability_id:
                    referencedColumnName: id
                    onDelete: 'SET NULL'
        buyPriceTax:
            targetEntity: WellCommerce\AppBundle\Entity\Tax
            fetch: LAZY
            joinColumns:
                buy_tax_id:
                    referencedColumnName: id
                    onDelete: 'SET NULL'
        sellPriceTax:
            targetEntity: WellCommerce\AppBundle\Entity\Tax
            fetch: LAZY
            joinColumns:
                sell_tax_id:
                    referencedColumnName: id
                    onDelete: 'SET NULL'
        attributeGroup:
            targetEntity: WellCommerce\AppBundle\Entity\Attribute\Group
            fetch: LAZY
            joinColumns:
                attribute_group_id:
                    referencedColumnName: id
                    onDelete: 'SET NULL'
        photo:
            targetEntity: WellCommerce\AppBundle\Entity\Media
            fetch: LAZY
            joinColumns:
                photo_id:
                    referencedColumnName: id
                    onDelete: 'SET NULL'
    manyToMany:
        categories:
            targetEntity: WellCommerce\AppBundle\Entity\Category
            fetch: LAZY
            inversedBy: products
            joinTable:
                name: category_product
                joinColumns:
                    -
                        name: product_id
                        nullable: false
                        onDelete: CASCADE
                        referencedColumnName: id
                inverseJoinColumns:
                    -
                        name: category_id
                        nullable: false
                        onDelete: CASCADE
                        referencedColumnName: id
        statuses:
            targetEntity: WellCommerce\AppBundle\Entity\ProductStatus
            fetch: LAZY
            inversedBy: products
            joinTable:
                name: product_product_status
                joinColumns:
                    -
                        name: product_id
                        nullable: false
                        onDelete: CASCADE
                        referencedColumnName: id
                inverseJoinColumns:
                    -
                        name: product_status_id
                        nullable: false
                        onDelete: CASCADE
                        referencedColumnName: id
        shops:
            targetEntity: WellCommerce\AppBundle\Entity\Shop
            fetch: LAZY
            inversedBy: products
            joinTable:
                name: shop_product
                joinColumns:
                    -
                        name: product_id
                        nullable: false
                        onDelete: CASCADE
                        referencedColumnName: id
                inverseJoinColumns:
                    -
                        name: shop_id
                        nullable: false
                        onDelete: CASCADE
                        referencedColumnName: id
    oneToMany:
        productPhotos:
            targetEntity: WellCommerce\AppBundle\Entity\ProductPhoto
            cascade:
                - remove
                - persist
            fetch: LAZY
            mappedBy: product
            orphanRemoval: true
        attributes:
            targetEntity: WellCommerce\AppBundle\Entity\ProductAttribute
            cascade:
                - all
            fetch: LAZY
            mappedBy: product
            orphanRemoval: true
        reviews:
            targetEntity: WellCommerce\AppBundle\Entity\ProductReview
            cascade:
              - all
            fetch: LAZY
            mappedBy: product
            orphanRemoval: true
