<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <service id="form.formatter.javascript" class="WellCommerce\Bundle\FormBundle\Formatter\JavascriptFormatter" />

        <service id="form.renderer.javascript" class="WellCommerce\Bundle\FormBundle\Renderer\JavascriptRenderer">
            <argument type="service" id="form.formatter.javascript"/>
            <argument>WellCommerceFormBundle:Form:form.html.twig</argument>
        </service>

        <service id="form.property_accessor" class="Symfony\Component\PropertyAccess\PropertyAccess" factory-class="Symfony\Component\PropertyAccess\PropertyAccess" factory-method="createPropertyAccessor"/>

        <service id="form.data_mapper" class="WellCommerce\Bundle\FormBundle\DataMapper\FormDataMapper">
            <argument type="service" id="form.property_accessor"/>
        </service>

        <service id="form.request_handler" class="WellCommerce\Bundle\FormBundle\Request\FormRequestHandler">
            <argument type="service" id="request_stack"/>
        </service>

        <service id="form.validator" class="WellCommerce\Bundle\FormBundle\Validator\FormValidator">
            <argument type="service" id="doctrine_helper"/>
            <argument type="service" id="validator"/>
        </service>

        <service id="form.handler" class="WellCommerce\Bundle\FormBundle\Handler\FormHandler">
            <argument type="service" id="event_dispatcher"/>
            <argument type="service" id="form.data_mapper"/>
            <argument type="service" id="form.validator"/>
            <argument type="service" id="form.request_handler"/>
        </service>

        <service id="form.resolver.factory" class="WellCommerce\Bundle\FormBundle\Resolver\FormResolverFactory" />

        <service id="form.resolver.element" class="WellCommerce\Bundle\FormBundle\Resolver\ElementResolver">
            <tag name="form.resolver" type="element"/>
        </service>

        <service id="form.resolver.filter" class="WellCommerce\Bundle\FormBundle\Resolver\FilterResolver">
            <tag name="form.resolver" type="filter"/>
        </service>

        <service id="form.resolver.rule" class="WellCommerce\Bundle\FormBundle\Resolver\RuleResolver">
            <tag name="form.resolver" type="rule"/>
        </service>

        <service id="form.resolver.dependency" class="WellCommerce\Bundle\FormBundle\Resolver\DependencyResolver">
            <tag name="form.resolver" type="dependency"/>
        </service>

        <service id="form.element.form" class="WellCommerce\Bundle\FormBundle\Elements\Form" scope="prototype">
            <tag name="form.element" alias="form"/>
        </service>

        <service id="form.element.attribute_editor" class="WellCommerce\Bundle\FormBundle\Elements\Editor\AttributeEditor" scope="prototype">
            <tag name="form.element" alias="attribute_editor"/>
        </service>

        <service id="form.element.text_field" class="WellCommerce\Bundle\FormBundle\Elements\Input\TextField" scope="prototype">
            <tag name="form.element" alias="text_field"/>
        </service>

        <service id="form.element.slug_field" class="WellCommerce\Bundle\FormBundle\Elements\Input\SlugField" scope="prototype">
            <tag name="form.element" alias="slug_field"/>
        </service>

        <service id="form.element.date" class="WellCommerce\Bundle\FormBundle\Elements\Input\Date" scope="prototype">
            <tag name="form.element" alias="date"/>
        </service>

        <service id="form.element.font_style" class="WellCommerce\Bundle\FormBundle\Elements\Input\FontStyle" scope="prototype">
            <tag name="form.element" alias="font_style"/>
        </service>

        <service id="form.element.submit" class="WellCommerce\Bundle\FormBundle\Elements\Button\Submit" scope="prototype">
            <tag name="form.element" alias="submit"/>
        </service>

        <service id="form.element.price" class="WellCommerce\Bundle\FormBundle\Elements\Editor\PriceEditor" scope="prototype">
            <tag name="form.element" alias="price_editor"/>
        </service>

        <service id="form.element.product_variants_editor" class="WellCommerce\Bundle\FormBundle\Elements\Editor\ProductVariantsEditor" scope="prototype">
            <tag name="form.element" alias="product_variants_editor"/>
        </service>

        <service id="form.element.password" class="WellCommerce\Bundle\FormBundle\Elements\Input\Password" scope="prototype">
            <tag name="form.element" alias="password"/>
        </service>

        <service id="form.element.tip" class="WellCommerce\Bundle\FormBundle\Elements\Fixed\Tip" scope="prototype">
            <tag name="form.element" alias="tip"/>
        </service>

        <service id="form.element.rich_text_editor" class="WellCommerce\Bundle\FormBundle\Elements\Input\RichTextEditor" scope="prototype">
            <tag name="form.element" alias="rich_text_editor"/>
        </service>

        <service id="form.element.text_area" class="WellCommerce\Bundle\FormBundle\Elements\Input\TextArea" scope="prototype">
            <tag name="form.element" alias="text_area"/>
        </service>

        <service id="form.element.tree" class="WellCommerce\Bundle\FormBundle\Elements\Tree\Tree" scope="prototype">
            <tag name="form.element" alias="tree"/>
        </service>

        <service id="form.element.checkbox" class="WellCommerce\Bundle\FormBundle\Elements\Input\Checkbox" scope="prototype">
            <tag name="form.element" alias="checkbox"/>
        </service>

        <service id="form.element.select" class="WellCommerce\Bundle\FormBundle\Elements\Optioned\Select" scope="prototype">
            <tag name="form.element" alias="select"/>
        </service>

        <service id="form.element.multi_select" class="WellCommerce\Bundle\FormBundle\Elements\Optioned\MultiSelect" scope="prototype">
            <tag name="form.element" alias="multi_select"/>
        </service>

        <service id="form.element.fieldset" class="WellCommerce\Bundle\FormBundle\Elements\Fieldset\NestedFieldset" scope="prototype">
            <tag name="form.element" alias="nested_fieldset"/>
        </service>

        <service id="form.element.fieldset_language" class="WellCommerce\Bundle\FormBundle\Elements\Fieldset\LanguageFieldset" scope="prototype">
            <argument type="expression">service('locale.repository').getAvailableLocales()</argument>
            <tag name="form.element" alias="language_fieldset"/>
        </service>

        <service id="form.element.fieldset_repeatable" class="WellCommerce\Bundle\FormBundle\Elements\Fieldset\RepeatableFieldset" scope="prototype">
            <tag name="form.element" alias="repeatable_fieldset"/>
        </service>

        <service id="form.element.layout_boxes_list" class="WellCommerce\Bundle\FormBundle\Elements\Editor\LayoutBoxesList" scope="prototype">
            <tag name="form.element" alias="layout_boxes_list"/>
        </service>

        <service id="form.element.image" class="WellCommerce\Bundle\FormBundle\Elements\Upload\Image" scope="prototype">
            <tag name="form.element" alias="image"/>
        </service>

        <service id="form.filter.no_code" class="WellCommerce\Bundle\FormBundle\Filters\NoCode" scope="prototype">
            <tag name="form.filter" alias="no_code"/>
        </service>

        <service id="form.filter.secure" class="WellCommerce\Bundle\FormBundle\Filters\Secure" scope="prototype">
            <tag name="form.filter" alias="secure"/>
        </service>

        <service id="form.filter.trim" class="WellCommerce\Bundle\FormBundle\Filters\Trim" scope="prototype">
            <tag name="form.filter" alias="trim"/>
        </service>

        <service id="form.filter.comma_to_dot_changer" class="WellCommerce\Bundle\FormBundle\Filters\CommaToDotChanger" scope="prototype">
            <tag name="form.filter" alias="comma_to_dot_changer"/>
        </service>

        <service id="form.dependency.show" class="WellCommerce\Bundle\FormBundle\Dependencies\Show" scope="prototype">
            <tag name="form.dependency" alias="show"/>
        </service>

        <service id="twig.extension.form" class="WellCommerce\Bundle\FormBundle\Twig\Extension\FormJavascriptExtension">
            <argument type="service" id="form.renderer.javascript"/>
            <tag name="twig.extension"/>
        </service>
    </services>
</container>
